<div class="text-center text-muted fs-1 my-3">消費分析</div>
{{!-- total amount section --}}
<section class="row mt-4 mb-2">
  <div class="col-12 text-center">
    <span class="fs-4 text-muted align-top mx-2" id="totalAmount">總金額:</span>
    <span class="fw-bold mx-3 totalAmount"
      style="color: rgb(88, 160, 180); font-size:4.5rem">{{totalAmount}}</span>
  </div>
</section>
{{!-- date range select section --}}
<section class="row d-flex justify-content-center mt-1 m3-5">
  <div class="text-center">
    <form action="/records/{{user._id}}/stats" method="get">
      <div class="sort-date col-lg-6 offset-lg-3">
        <label class="form-label fs-4 fw-bold mt-2" for="startDate">日期</label>
        <div class="d-flex justify-content-center">
          <div class="form-outline form-white me-2">
            <input type="date" id="startDate" name="startDate"
              class="form-control" value={{startDate}}>
          </div>
          <span class="fs-2 fw-bold">-</span>
          <div class="form-outline form-white ms-2">
            <input type="date" id="endDate" name="endDate"
              class="form-control"
              value={{endDate}}>
          </div>
          <div>
            <button class="btn btn-dark ms-2" type="submit">篩選</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
{{!-- Chart Section  --}}
<section>
  <div class="d-flex justify-content-center mt-3" style="height: auto;width:500px; margin:auto">
    <canvas id="myChart" style="height: auto;width:500px;"></canvas>
  </div>
</section>
{{!-- record table section --}}
<section class="row d-flex justify-content-center px-1 my-4">
  <div class="container" style="max-width: 96%;">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col" class=" fs-4 fw-bold text-center">類別</th>
          <th scope="col" class=" fs-4 fw-bold text-center">金額</th>
          <th scope="col" class=" fs-4 fw-bold text-center">比例</th>
        </tr>
      </thead>
      <tbody>
        {{#each records}}
        <tr class="records">
          <th scope="row" class="text-center fs-4">
            <span style="color: rgb(88, 160, 180);">{{{this.icon}}}</span>
            <span class="ms-1" style="color: rgb(88, 160, 180);">{{this.category}}</span>
          </th>
          <td class="text-wrap text-center fs-5">{{this.totalAmount}}</td>
          <td class="text-wrap text-center fs-5">{{this.percentage}} %</td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</section>

<div class="text-center"><a href="../../download/user{{userId}}Report.csv" class="btn btn-dark">下載csv檔案</a></div>
